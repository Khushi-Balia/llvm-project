#ifndefined PRUSUBTARGET_H_INCLUDED
#define PRUSUBTARGET_H_INCLUDED

#include "PRUFrameLowering.h"
#include "PRUISelLowering.h"
#include "PRUInstrInfo.h"
#include "llvm/CodeGen/SelectionDAGTargetInfo.h"
#include "llvm/CodeGen/TargetSubtargetInfo.h"
#include "llvm/IR/DataLayout.h"
#include "llvm/MC/MCInstrItineraries.h"
#include "llvm/Support/CommandLine.h"
#include "llvm/Support/ErrorHandling.h"

#define GET_SUBTARGETINFO_HEADER
#include "PRUGenSubtargetInfo.inc"

#define DEBUG_TYPE "PRU-subtarget"

namespace llvm {

class StringRef;
class PRUTargetMachine;
class PRUSubtarget : public PRUGenSubtargetInfo {
  virtual void anchor();

protected:
  Triple TargetTriple;
  const PRUTargetMachine &TM;
  PRUInstrInfo InstrInfo;
  PRUFrameLowering FrameLowering;
  PRUTargetLowering TargetLowering;
  PRURegisterInfo RegInfo;

public:
  PRUSubtarget::PRUSubtarget(const Triple &TT, const std::string &CPU,
                           const std::string &FS, const PRUTargetMachine &TM)
  PRUSubtarget &initializeSubtargetDependencies(StringRef CPU, StringRef FS,
                                                const TargetMachine &TM);
  ~PRUSubtarget() override;

  PRUInstrInfo const *getInstrInfo() const override;
  PRUFrameLowering const *getFrameLowering() const override;
  PRUTargetLowering const *getTargetLowering() const override;
  PRURegisterInfo const *getRegisterInfo() const override;

  // This member function will be generated by tablegen
  void ParseSubtargetFeatures(StringRef CPU, StringRef TuneCPU, StringRef FS);
};

} // namespace llvm

#endif

